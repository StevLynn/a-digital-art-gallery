<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Postingan Baru</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@1,700&family=Poppins:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="top-section">
        <a href="Home.html"><i class="fa-solid fa-arrow-left"></i></a>
        <h1>New Post</h1>
    </div>
        <form>
            <div class="form-gambar" id="file-input-container">
                <input type="file" id="gambar" name="gambar" accept="image/*" required>
            </div>
            <div class="form-gambar">
                <img id="preview" alt="Preview">
                <canvas id="canvas" width="450" height="250"></canvas>
            </div>
            <div class="form-group">
                <label for="nama">Painting name</label>
                <input type="text" id="nama" name="nama" required>
            </div>
            <div class="form-group">
                <label for="deskripsi">Description</label>
                <textarea id="deskripsi" name="deskripsi" required></textarea>
            </div>
            <div class="form-group">
                <label for="media">Media</label>
                <input type="text" id="media" name="media" required>
            </div>
            <div class="form-group">
                <label for="tahun">Production year</label>
                <input type="number" id="tahun" name="tahun" required>
            </div>
            <div class="form-group">
                <label for="ukuran">Size</label>
                <input type="text" id="ukuran" name="ukuran" required>
            </div>
            <div class="form-group">
                <button type="submit" class="submit-btn">SUBMIT</button>
            </div>
        </form>
    <footer>
        <div class="footer-content">
            <h3>A Digital Art Gallery</h3>
            <p>Visit us</p>
            <ul class="socials">
                <li><a href="https://www.instagram.com/adheputryb_01"><i class="fab fa-instagram"></i></a></li>
                <li><a href="https://www.facebook.com/Alif Saputra"><i class="fab fa-facebook"></i></a></li>
                <li><a href="https://www.twitter.com/ibnudzaky"><i class="fab fa-twitter"></i></a></li>
                <li><a href="mailto:stevelinfriska29@gmail.com"><i class="far fa-envelope"></i></a></li>
            </ul>
        </div>
        <div class="footer-bottom">
            <p>copyright &copy;2024 A Digital Art Gallery. design by<span>kelompok 2dua</span></p>        
        </div>    
    </footer>

    <script>
        document.getElementById('gambar').addEventListener('change', function() {
            var file = this.files[0];
            var reader = new FileReader();

            reader.onload = function(e) {
                var img = new Image();
                img.src = e.target.result;

                img.onload = function() {
                    var canvas = document.getElementById('canvas');
                    var ctx = canvas.getContext('2d');
                    
                    // Calculate aspect ratio
                    var aspectRatio = img.width / img.height;
                    var newWidth, newHeight;
                    if (aspectRatio > 1) {
                        newWidth = 450;
                        newHeight = 450 / aspectRatio;
                    } else {
                        newHeight = 250;
                        newWidth = 250 * aspectRatio;
                    }

                    // Clear the canvas
                    ctx.clearRect(0, 0, canvas.width, canvas.height);

                    // Draw image centered in the canvas
                    var xOffset = (canvas.width - newWidth) / 2;
                    var yOffset = (canvas.height - newHeight) / 2;
                    ctx.drawImage(img, xOffset, yOffset, newWidth, newHeight);

                    // Display the image preview
                    var preview = document.getElementById('preview');
                    preview.src = canvas.toDataURL();
                    preview.style.display = 'block';

                    // Hide the file input container
                    var fileInputContainer = document.getElementById('file-input-container');
                    fileInputContainer.style.display = 'none';
                }
            }

            reader.readAsDataURL(file);
        });

        document.querySelector('form').addEventListener('submit', function(event) {
            event.preventDefault();
            
            var canvas = document.getElementById('canvas');
            var croppedImage = document.getElementById('cropped-image');
            croppedImage.src = canvas.toDataURL();
            croppedImage.style.display = 'block';
        });
    </script>
</body>
</html>
